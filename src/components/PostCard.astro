---
interface Props {
  title: string;
  slug: string;
  date: Date;
  description: string;
  categories: string[];
}

const { title, slug, date, description, categories } = Astro.props;

function slugify(str: string): string {
  return str.toLowerCase().replace(/\s+/g, '-');
}
---

<div class="post-card">
  <h3 class="post-card__title">
    <a href={`/blog/${slug}/`}>{title}</a>
  </h3>
  <div class="post-card__meta">
    <time datetime={date.toISOString()}>
      {date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
    </time>
    {categories.length > 0 && (
      <span>
        {categories.map((cat, i) => (
          <>
            {i > 0 && ', '}
            <a class="category-link" href={`/category/${slugify(cat)}/`}>{cat}</a>
          </>
        ))}
      </span>
    )}
  </div>
  <p class="post-card__description">{description}</p>
</div>
